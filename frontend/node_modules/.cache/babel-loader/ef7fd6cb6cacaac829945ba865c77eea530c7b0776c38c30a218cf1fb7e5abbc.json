{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport useAuth from './useAuth';\nimport useApi from './useApi';\nconst useMessages = (type, patientId) => {\n  _s();\n  const {\n    get,\n    loading,\n    error\n  } = useApi();\n  const [messages, setMessages] = useState([]);\n  const {\n    user\n  } = useAuth();\n  useEffect(() => {\n    const fetchMessages = async () => {\n      setLoading(true);\n      let url;\n      if (type === 'all') {\n        url = '/messages/all';\n      } else if (type === 'active') {\n        url = '/messages/active';\n      } else if (type === 'archived') {\n        url = '/messages/archived';\n      } else if (type === 'patient' && patientId) {\n        url = `/patient/${patientId}/messages`;\n      } else {\n        console.error('Invalid arguments for useMessages');\n        return;\n      }\n      const fetchData = async () => {\n        try {\n          if (user && user.token) {\n            const fetchedNotes = await get(`/patients/${patientId}/notes/list`, user.token);\n            if (fetchedNotes) {\n              setMessages(fetchedNotes);\n            } else {\n              toast.error('Error fetching patient messages');\n            }\n          }\n        } catch (apiError) {\n          toast.error('Error fetching patient messages');\n        }\n      };\n    };\n    fetchData();\n  }, [type, patientId]);\n  return {\n    messages,\n    loading\n  };\n};\n_s(useMessages, \"oBDreevB8HrXmYf3SqPTusmxkK4=\", false, function () {\n  return [useApi, useAuth];\n});\nexport default useMessages;","map":{"version":3,"names":["useState","useEffect","useAuth","useApi","useMessages","type","patientId","_s","get","loading","error","messages","setMessages","user","fetchMessages","setLoading","url","console","fetchData","token","fetchedNotes","toast","apiError"],"sources":["C:/Users/Yaman/GitHub/JournalSystem/frontend/src/hooks/useMessages.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport useAuth from './useAuth';\r\nimport useApi from './useApi';\r\n\r\nconst useMessages = (type, patientId) => {\r\n  const { get, loading, error } = useApi();\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const {user} = useAuth()\r\n\r\n  useEffect(() => {\r\n    const fetchMessages = async () => {\r\n      setLoading(true);\r\n\r\n      let url;\r\n\r\n      if (type === 'all') {\r\n        url = '/messages/all';\r\n      } else if (type === 'active') {\r\n        url = '/messages/active';\r\n      } else if (type === 'archived') {\r\n        url = '/messages/archived';\r\n      } else if (type === 'patient' && patientId) {\r\n        url = `/patient/${patientId}/messages`;\r\n      } else {\r\n        console.error('Invalid arguments for useMessages');\r\n        return;\r\n      }\r\n      const fetchData = async () => {\r\n        try {\r\n          if (user && user.token ) {\r\n            const fetchedNotes = await get(`/patients/${patientId}/notes/list`, user.token);\r\n  \r\n            if (fetchedNotes) {\r\n              setMessages(fetchedNotes);\r\n            } else {\r\n              toast.error('Error fetching patient messages');\r\n            }\r\n          }\r\n        } catch (apiError) {\r\n          toast.error('Error fetching patient messages');\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [type, patientId]);\r\n\r\n  return { messages, loading };\r\n};\r\n\r\nexport default useMessages;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,MAAM,MAAM,UAAU;AAE7B,MAAMC,WAAW,GAAGA,CAACC,IAAI,EAAEC,SAAS,KAAK;EAAAC,EAAA;EACvC,MAAM;IAAEC,GAAG;IAAEC,OAAO;IAAEC;EAAM,CAAC,GAAGP,MAAM,CAAC,CAAC;EACxC,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAM;IAACa;EAAI,CAAC,GAAGX,OAAO,CAAC,CAAC;EAExBD,SAAS,CAAC,MAAM;IACd,MAAMa,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChCC,UAAU,CAAC,IAAI,CAAC;MAEhB,IAAIC,GAAG;MAEP,IAAIX,IAAI,KAAK,KAAK,EAAE;QAClBW,GAAG,GAAG,eAAe;MACvB,CAAC,MAAM,IAAIX,IAAI,KAAK,QAAQ,EAAE;QAC5BW,GAAG,GAAG,kBAAkB;MAC1B,CAAC,MAAM,IAAIX,IAAI,KAAK,UAAU,EAAE;QAC9BW,GAAG,GAAG,oBAAoB;MAC5B,CAAC,MAAM,IAAIX,IAAI,KAAK,SAAS,IAAIC,SAAS,EAAE;QAC1CU,GAAG,GAAI,YAAWV,SAAU,WAAU;MACxC,CAAC,MAAM;QACLW,OAAO,CAACP,KAAK,CAAC,mCAAmC,CAAC;QAClD;MACF;MACA,MAAMQ,SAAS,GAAG,MAAAA,CAAA,KAAY;QAC5B,IAAI;UACF,IAAIL,IAAI,IAAIA,IAAI,CAACM,KAAK,EAAG;YACvB,MAAMC,YAAY,GAAG,MAAMZ,GAAG,CAAE,aAAYF,SAAU,aAAY,EAAEO,IAAI,CAACM,KAAK,CAAC;YAE/E,IAAIC,YAAY,EAAE;cAChBR,WAAW,CAACQ,YAAY,CAAC;YAC3B,CAAC,MAAM;cACLC,KAAK,CAACX,KAAK,CAAC,iCAAiC,CAAC;YAChD;UACF;QACF,CAAC,CAAC,OAAOY,QAAQ,EAAE;UACjBD,KAAK,CAACX,KAAK,CAAC,iCAAiC,CAAC;QAChD;MACF,CAAC;IACH,CAAC;IAEDQ,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACb,IAAI,EAAEC,SAAS,CAAC,CAAC;EAErB,OAAO;IAAEK,QAAQ;IAAEF;EAAQ,CAAC;AAC9B,CAAC;AAACF,EAAA,CA7CIH,WAAW;EAAA,QACiBD,MAAM,EAGvBD,OAAO;AAAA;AA2CxB,eAAeE,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}